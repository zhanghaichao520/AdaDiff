# 檔案路徑: configs/OneRec.yaml

# MiniOneRec 模型配置 - 轻量化生成式推荐架构
model_params:
  max_len: 100
  d_model: 512
  d_ff: 1536  # 优化的前馈网络维度 (3/4 * 2048)
  num_heads: 8
  num_encoder_layers: 4  # 减少层数以提高效率
  num_decoder_layers: 4
  dropout: 0.1
  # MiniOneRec 特定参数
  use_swiglu: true  # 启用SwiGLU激活函数
  pre_norm: true    # 使用Pre-norm架构
  weight_sharing: true  # token embedding和输出层权重共享

# 优化的训练参数
training_params:
  lr: 0.0001
  batch_size: 256  # 进一步减小batch size以适应轻量化模型
  warmup_steps: 1000
  weight_decay: 0.01
  gradient_clip_norm: 1.0
  # MiniOneRec 训练优化
  label_smoothing: 0.1
  accumulate_grad_batches: 2

# 优化的评估参数
evaluation_params:
  use_prefix_trie: true  # 启用前缀约束，与TIGER一致
  beam_size: 10  # 优化的beam search大小
  early_stopping: true
  length_penalty: 1.0
  # MiniOneRec 生成优化
  do_sample: false  # 使用确定性生成
  temperature: 1.0
  top_k: 50
  top_p: 0.9