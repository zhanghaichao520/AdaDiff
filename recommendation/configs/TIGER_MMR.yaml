# tigermmr.yaml（调回“高召回/中等多样性”区间：Recall@10 目标 0.2~0.4，Diversity@10 目标 0.4~0.6）
model_params:
  max_len: 20
  d_model: 512
  d_ff: 2048
  d_kv: 64
  num_layers: 6
  num_decoder_layers: 6
  num_heads: 8
  dropout_rate: 0.1

training_params:
  lr: 0.0001
  batch_size: 1024
  eval_interval: 5

evaluation_params:
  use_prefix_trie: false
  use_mmr: true
  alpha_diversity: 0.5
  topk_list: [5, 10]
  batch_size: 128

  beam_size: 30
  mmr_pool_size: 30
  mmr_lambda: 0.83
  mmr_lambda_power: 1.0

  mmr_penalty_scale: 0.5
  mmr_penalty_power: 1.0
  mmr_penalty_weight_power: 1.5

  mmr_rel_suppress_scale: 1.5
  mmr_rel_suppress_power: 2.0
  mmr_rel_suppress_weight_power: 0.3

  mmr_rank_penalty_scale: 0.2
  mmr_rank_penalty_weight_power: 0.6

  mmr_rank_norm: false
  mmr_tie_break_by_score: false

  mmr_cate_popularity_scale: 0.0
  mmr_cate_popularity_power: 1.0

  mmr_cap_lambda_threshold: 0.2
  mmr_max_per_cate_min: 1
  mmr_max_per_cate_max: 1
  mmr_diverse_k: 10

  diversity_min_items_per_cate: 80
  diversity_max_categories: 10
  diversity_split_threshold: 0.1
  diversity_use_composite_keys: false